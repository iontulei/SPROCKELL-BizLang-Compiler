--------------- SOURCE CODE ---------------
// testThreads.txt

// NOTE: SHARED MEMORY HAS ONLY 8 SLOTS!

// Declare global variables (4 shMem slots)
global int x = 0;
global int y = 5;
Lock myLock;
Lock barrier;

// lock "barrier"
// NOTE: THIS IS NOT AN REENTRANT LOCK!
barrier.lock;

// 5th shMem slot
// First thread: increment x and y within a locked block
thread {
    myLock.lock;
    x = x + 1;
    y = y + 2;

    print("Thread 1 x");
    print(x); // Should print 1
    print("Thread 1 y");
    print(y); // Should print 7

    myLock.unlock;
}

// 6th shMem slot
// Second thread: decrement x
thread {
    myLock.lock;
    x = x - 1;

    print("Thread 2 x");
    print(x); // Should print 0
    
    myLock.unlock;

    // 7th shMem slot
    thread {
        myLock.lock;
        x = x * 2;
        y = y * 3;

        print("Thread 3 x");
        print(x);
        print("Thread 3 y");
        print(y);
        myLock.unlock;

        // 8th shMem slot
        thread {
            x = x + 2;
            y = y + 2;
            
            print("Thread 4 x");
            print(x);
            print("Thread 4 y");
            print(y);

            // unlock "barrier"
            barrier.unlock;
        }
    }
}

// 9th shMem slot (if uncommented - causes error) 
// Lock l8;
// l8.lock;


// barrier works as a barrier / join of threads
barrier.lock;

myLock.lock;

// Verify the final state of x, y
print("Final x");
print(x);
print("Final y");
print(y);

myLock.unlock;

------------- GENERATED CODE -------------
[[Load (ImmValue 0) 2,
  WriteInstr 2 (DirAddr 0),
  Load (ImmValue 5) 2,
  WriteInstr 2 (DirAddr 1),
  Load (ImmValue 0) 2,
  Store 2 (DirAddr 2),
  Load (ImmValue 0) 2,
  Store 2 (DirAddr 3),
  TestAndSet (DirAddr 3),
  Receive 2,
  Compute Equal 0 2 2,
  Branch 2 (Rel (-3)),
  TestAndSet (DirAddr 4),
  Receive 2,
  TestAndSet (DirAddr 5),
  Receive 2,
  TestAndSet (DirAddr 3),
  Receive 2,
  Compute Equal 0 2 2,
  Branch 2 (Rel (-3)),
  TestAndSet (DirAddr 2),
  Receive 2,
  Compute Equal 0 2 2,
  Branch 2 (Rel (-3)),
  Load (ImmValue 83) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 112) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 114) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 111) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 99) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 107) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 48) 2,
  Compute Add 1 2 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 121) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 70) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 105) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 110) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 120) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 10) 2,
  WriteInstr 2 (DirAddr 65537),
  ReadInstr (DirAddr 0),
  Receive 2,
  WriteInstr 2 (DirAddr 65536),
  Load (ImmValue 83) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 112) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 114) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 111) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 99) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 107) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 48) 2,
  Compute Add 1 2 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 121) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 70) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 105) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 110) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 121) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 10) 2,
  WriteInstr 2 (DirAddr 65537),
  ReadInstr (DirAddr 1),
  Receive 2,
  WriteInstr 2 (DirAddr 65536),
  WriteInstr 0 (DirAddr 2),
  EndProg],
 [ReadInstr (DirAddr 4),
  Receive 2,
  Compute Equal 0 2 2,
  Branch 2 (Rel (-3)),
  TestAndSet (DirAddr 2),
  Receive 2,
  Compute Equal 0 2 2,
  Branch 2 (Rel (-3)),
  ReadInstr (DirAddr 0),
  Receive 2,
  Push 2,
  Load (ImmValue 1) 2,
  Pop 3,
  Compute Add 3 2 2,
  WriteInstr 2 (DirAddr 0),
  ReadInstr (DirAddr 1),
  Receive 2,
  Push 2,
  Load (ImmValue 2) 2,
  Pop 3,
  Compute Add 3 2 2,
  WriteInstr 2 (DirAddr 1),
  Load (ImmValue 83) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 112) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 114) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 111) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 99) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 107) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 48) 2,
  Compute Add 1 2 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 121) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 84) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 104) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 114) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 100) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 49) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 120) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 10) 2,
  WriteInstr 2 (DirAddr 65537),
  ReadInstr (DirAddr 0),
  Receive 2,
  WriteInstr 2 (DirAddr 65536),
  Load (ImmValue 83) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 112) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 114) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 111) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 99) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 107) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 48) 2,
  Compute Add 1 2 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 121) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 84) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 104) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 114) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 100) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 49) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 121) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 10) 2,
  WriteInstr 2 (DirAddr 65537),
  ReadInstr (DirAddr 1),
  Receive 2,
  WriteInstr 2 (DirAddr 65536),
  WriteInstr 0 (DirAddr 2),
  EndProg],
 [ReadInstr (DirAddr 5),
  Receive 2,
  Compute Equal 0 2 2,
  Branch 2 (Rel (-3)),
  TestAndSet (DirAddr 2),
  Receive 2,
  Compute Equal 0 2 2,
  Branch 2 (Rel (-3)),
  ReadInstr (DirAddr 0),
  Receive 2,
  Push 2,
  Load (ImmValue 1) 2,
  Pop 3,
  Compute Sub 3 2 2,
  WriteInstr 2 (DirAddr 0),
  Load (ImmValue 83) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 112) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 114) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 111) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 99) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 107) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 48) 2,
  Compute Add 1 2 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 121) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 84) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 104) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 114) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 100) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 50) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 120) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 10) 2,
  WriteInstr 2 (DirAddr 65537),
  ReadInstr (DirAddr 0),
  Receive 2,
  WriteInstr 2 (DirAddr 65536),
  WriteInstr 0 (DirAddr 2),
  TestAndSet (DirAddr 6),
  Receive 2,
  EndProg],
 [ReadInstr (DirAddr 6),
  Receive 2,
  Compute Equal 0 2 2,
  Branch 2 (Rel (-3)),
  TestAndSet (DirAddr 2),
  Receive 2,
  Compute Equal 0 2 2,
  Branch 2 (Rel (-3)),
  ReadInstr (DirAddr 0),
  Receive 2,
  Push 2,
  Load (ImmValue 2) 2,
  Pop 3,
  Compute Mul 3 2 2,
  WriteInstr 2 (DirAddr 0),
  ReadInstr (DirAddr 1),
  Receive 2,
  Push 2,
  Load (ImmValue 3) 2,
  Pop 3,
  Compute Mul 3 2 2,
  WriteInstr 2 (DirAddr 1),
  Load (ImmValue 83) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 112) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 114) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 111) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 99) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 107) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 48) 2,
  Compute Add 1 2 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 121) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 84) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 104) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 114) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 100) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 51) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 120) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 10) 2,
  WriteInstr 2 (DirAddr 65537),
  ReadInstr (DirAddr 0),
  Receive 2,
  WriteInstr 2 (DirAddr 65536),
  Load (ImmValue 83) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 112) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 114) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 111) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 99) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 107) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 48) 2,
  Compute Add 1 2 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 121) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 84) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 104) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 114) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 100) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 51) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 121) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 10) 2,
  WriteInstr 2 (DirAddr 65537),
  ReadInstr (DirAddr 1),
  Receive 2,
  WriteInstr 2 (DirAddr 65536),
  WriteInstr 0 (DirAddr 2),
  TestAndSet (DirAddr 7),
  Receive 2,
  EndProg],
 [ReadInstr (DirAddr 7),
  Receive 2,
  Compute Equal 0 2 2,
  Branch 2 (Rel (-3)),
  ReadInstr (DirAddr 0),
  Receive 2,
  Push 2,
  Load (ImmValue 2) 2,
  Pop 3,
  Compute Add 3 2 2,
  WriteInstr 2 (DirAddr 0),
  ReadInstr (DirAddr 1),
  Receive 2,
  Push 2,
  Load (ImmValue 2) 2,
  Pop 3,
  Compute Add 3 2 2,
  WriteInstr 2 (DirAddr 1),
  Load (ImmValue 83) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 112) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 114) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 111) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 99) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 107) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 48) 2,
  Compute Add 1 2 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 121) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 84) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 104) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 114) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 100) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 52) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 120) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 10) 2,
  WriteInstr 2 (DirAddr 65537),
  ReadInstr (DirAddr 0),
  Receive 2,
  WriteInstr 2 (DirAddr 65536),
  Load (ImmValue 83) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 112) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 114) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 111) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 99) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 107) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 48) 2,
  Compute Add 1 2 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 121) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 84) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 104) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 114) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 100) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 52) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 121) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 10) 2,
  WriteInstr 2 (DirAddr 65537),
  ReadInstr (DirAddr 1),
  Receive 2,
  WriteInstr 2 (DirAddr 65536),
  WriteInstr 0 (DirAddr 3),
  EndProg
]]

----------------- OUTPUT -----------------
Sprockell 1 says Thread 1 x
Sprockell 1 says 1
Sprockell 1 says Thread 1 y
Sprockell 1 says 7
Sprockell 2 says Thread 2 x
Sprockell 2 says 0
Sprockell 3 says Thread 3 x
Sprockell 3 says 0
Sprockell 3 says Thread 3 y
Sprockell 3 says 21
Sprockell 4 says Thread 4 x
Sprockell 4 says 2
Sprockell 4 says Thread 4 y
Sprockell 4 says 23
Sprockell 0 says Final x
Sprockell 0 says 2
Sprockell 0 says Final y
Sprockell 0 says 23
