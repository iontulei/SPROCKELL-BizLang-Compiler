--------------- SOURCE CODE ---------------
int x = 10;
print(x);

thread {
    bool x;
    print(x);

    thread {
        int x = 20;
        print(x);

        {
            char x = 'a';
            print(x);

            {
                int x = 30;
                print(x);
            }
        }

        if (true) {
            char x = 'z';
            if (x == 'w') {
                print("impossible");
            } else {
                print("possible");
                print(x);
            }

            thread {
                int x = 50;
                print(x);

                while (x == 50) {
                    x = x + 50;
                    {
                        char x = 'W';
                        print(x);
                    }
                }
            }
        }
    }
}

------------- GENERATED CODE -------------
[[Load (ImmValue 10) 2,
  Store 2 (DirAddr 0),
  Load (DirAddr 0) 2,
  WriteInstr 2 (DirAddr 65536),
  TestAndSet (DirAddr 0),
  Receive 2,
  EndProg],
 [ReadInstr (DirAddr 0),
  Receive 2,
  Compute Equal 0 2 2,
  Branch 2 (Rel (-3)),
  Load (ImmValue 0) 2,
  Store 2 (DirAddr 0),
  Load (DirAddr 0) 2,
  Branch 2 (Rel 49),
  Load (ImmValue 83) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 112) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 114) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 111) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 99) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 107) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 101) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 108) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 108) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 32) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 48) 3,
  Compute Add 1 3 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 32) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 115) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 97) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 121) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 115) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 32) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 102) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 97) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 108) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 115) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 101) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 10) 3,
  WriteInstr 3 (DirAddr 65537),
  Jump (Rel 46),
  Load (ImmValue 83) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 112) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 114) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 111) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 99) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 107) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 101) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 108) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 108) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 32) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 48) 3,
  Compute Add 1 3 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 32) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 115) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 97) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 121) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 115) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 32) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 116) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 114) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 117) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 101) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 10) 3,
  WriteInstr 3 (DirAddr 65537),
  TestAndSet (DirAddr 1),
  Receive 2,
  EndProg],
 [ReadInstr (DirAddr 1),
  Receive 2,
  Compute Equal 0 2 2,
  Branch 2 (Rel (-3)),
  Load (ImmValue 20) 2,
  Store 2 (DirAddr 0),
  Load (DirAddr 0) 2,
  WriteInstr 2 (DirAddr 65536),
  Load (ImmValue 97) 2,
  Store 2 (DirAddr 1),
  Load (DirAddr 1) 2,
  Load (ImmValue 83) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 112) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 114) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 111) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 99) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 107) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 101) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 108) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 108) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 32) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 48) 3,
  Compute Add 1 3 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 32) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 115) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 97) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 121) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 115) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 32) 3,
  WriteInstr 3 (DirAddr 65537),
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 10) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 30) 2,
  Store 2 (DirAddr 2),
  Load (DirAddr 2) 2,
  WriteInstr 2 (DirAddr 65536),
  Load (ImmValue 1) 2,
  Compute Equal 0 2 2,
  Branch 2 (Rel 163),
  Load (ImmValue 122) 2,
  Store 2 (DirAddr 1),
  Load (DirAddr 1) 2,
  Push 2,
  Load (ImmValue 119) 2,
  Pop 3,
  Compute Equal 3 2 2,
  Compute Equal 0 2 2,
  Branch 2 (Rel 59),
  Load (ImmValue 83) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 112) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 114) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 111) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 99) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 107) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 48) 2,
  Compute Add 1 2 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 121) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 105) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 109) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 112) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 111) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 105) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 98) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 10) 2,
  WriteInstr 2 (DirAddr 65537),
  Jump (Rel 93),
  Load (ImmValue 83) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 112) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 114) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 111) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 99) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 107) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 48) 2,
  Compute Add 1 2 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 97) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 121) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 32) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 112) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 111) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 115) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 105) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 98) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 108) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 101) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 10) 2,
  WriteInstr 2 (DirAddr 65537),
  Load (DirAddr 1) 2,
  Load (ImmValue 83) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 112) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 114) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 111) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 99) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 107) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 101) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 108) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 108) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 32) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 48) 3,
  Compute Add 1 3 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 32) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 115) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 97) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 121) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 115) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 32) 3,
  WriteInstr 3 (DirAddr 65537),
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 10) 3,
  WriteInstr 3 (DirAddr 65537),
  TestAndSet (DirAddr 2),
  Receive 2,
  Jump (Rel 1),
  EndProg],
 [ReadInstr (DirAddr 2),
  Receive 2,
  Compute Equal 0 2 2,
  Branch 2 (Rel (-3)),
  Load (ImmValue 50) 2,
  Store 2 (DirAddr 0),
  Load (DirAddr 0) 2,
  WriteInstr 2 (DirAddr 65536),
  Jump (Rel 48),
  Load (DirAddr 0) 2,
  Push 2,
  Load (ImmValue 50) 2,
  Pop 3,
  Compute Add 3 2 2,
  Store 2 (DirAddr 0),
  Load (ImmValue 87) 2,
  Store 2 (DirAddr 1),
  Load (DirAddr 1) 2,
  Load (ImmValue 83) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 112) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 114) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 111) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 99) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 107) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 101) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 108) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 108) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 32) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 48) 3,
  Compute Add 1 3 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 32) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 115) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 97) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 121) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 115) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (ImmValue 32) 3,
  WriteInstr 3 (DirAddr 65537),
  WriteInstr 2 (DirAddr 65537),
  Load (ImmValue 10) 3,
  WriteInstr 3 (DirAddr 65537),
  Load (DirAddr 0) 2,
  Push 2,
  Load (ImmValue 50) 2,
  Pop 3,
  Compute Equal 3 2 2,
  Branch 2 (Rel (-52)),
  EndProg
]]

----------------- OUTPUT -----------------
Sprockell 0 says 10
Sprockell 1 says false
Sprockell 2 says 20
Sprockell 2 says a
Sprockell 2 says 30
Sprockell 2 says possible
Sprockell 2 says z
Sprockell 3 says 50
Sprockell 3 says W
